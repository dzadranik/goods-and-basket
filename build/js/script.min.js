"use strict";function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t)){for(var n=0,o=new Array(t.length);n<t.length;n++)o[n]=t[n];return o}}var _basketSetting=basketSetting(),addGoodToBasket=_basketSetting.addGoodToBasket,getLocalSorage=_basketSetting.getLocalSorage,removeGoodFromBasket=_basketSetting.removeGoodFromBasket,countGoodInBasket=_basketSetting.countGoodInBasket,_paging=paging(),addPaging=_paging.addPaging,setActivePage=_paging.setActivePage,_goodSetting=goodSetting(),loadGoodToPage=_goodSetting.loadGoodToPage,setAvaliable=_goodSetting.setAvaliable,setSorting=_goodSetting.setSorting,returnGoodData=_goodSetting.returnGoodData,_containerClassSettin=containerClassSetting(),findContainerAndRemoveClass=_containerClassSettin.findContainerAndRemoveClass;function addToContainer(t,n){var o=document.querySelector(t);o&&(o.innerHTML=n)}function addToAnyContainers(t,n){var o=document.querySelectorAll(t);if(o)for(var e=0;e<o.length;e++)o[e].innerHTML=n}function containerClassSetting(){var t,n;return{findContainerAndRemoveClass:function(o,e){t=document.querySelectorAll(o),n=e,function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(e<t.length)return t[e].classList.remove(n),o(e+1)}()}}}function goodSetting(){var t=[],n=!1,o="sorting-name";return{loadGoodToPage:function(){fetch("js/goods.json").then((function(t){return t.json()})).then((function(t){return function(t){var e=t;return n&&(e=function(t){return t.filter((function(t){return t.avaliable}))}(t)),"sorting-cost"==o?e=function(t){return t.sort((function(t,n){return t.price-n.price}))}(e):"sorting-name"==o&&(e=function(t){return t.sort((function(t,n){var o=t.title.toLowerCase(),e=n.title.toLowerCase();return o<e?-1:o<e?1:void 0}))}(e)),e}(t)})).then((function(t){return addPaging(t)})).then((function(n){!function(n){t=n;var o=n.map((function(t){return function(t){var n=t.id,o=t.image,e=t.title,a=t.price,i=t.descr;return'<div class="good__item" good-id='.concat(n,'>\n\t\t\t\t\t<div class="good__image"><img src="').concat(o,'"/></div>\n\t\t\t\t\t<div class="good__information">\n\t\t\t\t\t\t<div class="good__title">').concat(e,'</div>\n\t\t\t\t\t\t<div class="good__price">').concat(a,' руб</div>\n\t\t\t\t\t\t<div class="good__description">').concat(i,'</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="good__transaction">\n\t\t\t\t\t\t<button class="good__button">Добавить в корзину</button>\n\t\t\t\t\t\t<div class="good__basket-feedback js-good-in-basket"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>')}(t)}));addToContainer(".js-good",o=o.join(""))}(n),countGoodInBasket()}))},setAvaliable:function(t){n=t,setActivePage(0),loadGoodToPage()},setSorting:function(t){o!=t&&(o=t,loadGoodToPage())},returnGoodData:function(n){return t.find((function(t){return t.id==n}))}}}function paging(){var t=0,n=function(n){return'<button \n\t\t\tclass="pagination__item js-pagination-button '.concat(n==t?"active":"",'" \n\t\t\tid="').concat(n+1,'">\n\t\t\t\t').concat(n+1,"\n\t\t\t</button>")},o=function(t,o){for(var e="",a=t;a<o;a++)e+=n(a);return e};return{setActivePage:function(n){t=n,loadGoodToPage()},addPaging:function(n){return addToContainer(".js-pagination",function(n){var e=n.length,a=Math.ceil(e/15),i="";return a>6?t<2||t>a-3?(i+=o(0,3),i+="<span class='pagination__dots'>...</span>",i+=o(a-3,a)):2==t?(i+=o(0,4),i+="<span class='pagination__dots'>...</span>",i+=o(a-1,a)):t==a-3?(i+=o(0,1),i+="<span class='pagination__dots'>...</span>",i+=o(a-4,a)):t>2&&t<a-3&&(i+=o(0,1),i+="<span class='pagination__dots'>...</span>",i+=o(t-1,t+2),i+="<span class='pagination__dots'>...</span>",i+=o(a-1,a)):i+=o(0,a),i}(n)),function(n){var o=15*t,e=o+15;return n.slice(o,e)}(n)}}}function basketSetting(){var t=[],n=function(t){return t.count=1,t},o=function(){localStorage.goodInBasket=JSON.stringify(t),addToContainer(".js-basket-good",t.map((function(t){return o=(n=t).id,e=n.image,a=n.title,i=n.count,'<div class="basket__good-item" basket-good-id="'.concat(o,'">\n\t\t\t<button class="basket__good-remove js-remove-good">&#128938;</button>\n\t\t\t<div class="basket__good-image"><img src="').concat(e,'" /></div>\n\t\t\t<div class="basket__good-name">').concat(a,'</div>\n\t\t\t<div class="basket__good-amout">').concat(i,"</div>\n\t\t</div>");var n,o,e,a,i})).join("")),addToContainer(".js-count-result",t.reduce((function(t,n){return t+n.count*n.price}),0)),countGoodInBasket()};return{getLocalSorage:function(){null!=localStorage.getItem("goodInBasket")&&(t=JSON.parse(localStorage.getItem("goodInBasket"))),o()},countGoodInBasket:function(){var n=t.reduce((function(t,n){return t+n.count}),0);addToAnyContainers(".js-good-in-basket","Товаров в корзине  ".concat(n))},addGoodToBasket:function(e){for(var a=0;a<t.length;a++)if(e.id==t[a].id)return t[a].count++,void o();t=[].concat(_toConsumableArray(t),[n(e)]),o()},removeGoodFromBasket:function(n){var e,a;e=n,t.find((function(t,n){e==t.id&&(a=n)})),t.splice(a,1),o()}}}document.addEventListener("DOMContentLoaded",(function(){var t=document.querySelector(".js-pagination"),n=document.querySelector(".js-sorting-buttons"),o=document.getElementById("avaliable"),e=document.querySelector(".js-good"),a=document.querySelector(".js-basket-good");t.addEventListener("click",(function(t){var n=t.target;n.classList.contains("js-pagination-button")&&!n.classList.contains("active")&&setActivePage(n.getAttribute("id")-1)})),n.addEventListener("click",(function(t){var n=t.target,o=n.getAttribute("sorting-setting");n.classList.contains("js-sorting")&&!n.classList.contains("active")&&(findContainerAndRemoveClass(".js-sorting","active"),setSorting(o),n.classList.add("active"))})),o.addEventListener("change",(function(t){setAvaliable(t.target.checked)})),e.addEventListener("click",(function(t){if(t.target.classList.contains("good__button")){var n=t.target.parentElement.parentElement.getAttribute("good-id"),o=returnGoodData(n);addGoodToBasket(o)}})),a.addEventListener("click",(function(t){var n=t.target;if(n.classList.contains("js-remove-good")){var o=n.parentElement.getAttribute("basket-good-id");removeGoodFromBasket(o)}}))})),loadGoodToPage(),getLocalSorage();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyJdLCJuYW1lcyI6WyJfdG9Db25zdW1hYmxlQXJyYXkiLCJhcnIiLCJfYXJyYXlXaXRob3V0SG9sZXMiLCJfaXRlcmFibGVUb0FycmF5IiwiX25vbkl0ZXJhYmxlU3ByZWFkIiwiVHlwZUVycm9yIiwiaXRlciIsIlN5bWJvbCIsIml0ZXJhdG9yIiwiT2JqZWN0IiwicHJvdG90eXBlIiwidG9TdHJpbmciLCJjYWxsIiwiQXJyYXkiLCJmcm9tIiwiaXNBcnJheSIsImkiLCJhcnIyIiwibGVuZ3RoIiwiX2Jhc2tldFNldHRpbmciLCJiYXNrZXRTZXR0aW5nIiwiYWRkR29vZFRvQmFza2V0IiwiZ2V0TG9jYWxTb3JhZ2UiLCJyZW1vdmVHb29kRnJvbUJhc2tldCIsImNvdW50R29vZEluQmFza2V0IiwiX3BhZ2luZyIsInBhZ2luZyIsImFkZFBhZ2luZyIsInNldEFjdGl2ZVBhZ2UiLCJfZ29vZFNldHRpbmciLCJnb29kU2V0dGluZyIsImxvYWRHb29kVG9QYWdlIiwic2V0QXZhbGlhYmxlIiwic2V0U29ydGluZyIsInJldHVybkdvb2REYXRhIiwiX2NvbnRhaW5lckNsYXNzU2V0dGluIiwiY29udGFpbmVyQ2xhc3NTZXR0aW5nIiwiZmluZENvbnRhaW5lckFuZFJlbW92ZUNsYXNzIiwiYWRkVG9Db250YWluZXIiLCJjb250YWluZXJDbGFzcyIsImVsZW1lbnQiLCJjb250YWluZXIiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJpbm5lckhUTUwiLCJhZGRUb0FueUNvbnRhaW5lcnMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiYWxsQ29udGFpbmVyIiwiY2xhc3NUb1JlbW92ZSIsImNsYXNzTmFtZSIsInJlbW92ZUNsYXNzSW5Db250YWluZXIiLCJhcmd1bWVudHMiLCJ1bmRlZmluZWQiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJnb29kRGF0YSIsImF2YWxpYWJsZSIsInNvcnRpbmdWYWx1ZSIsImZldGNoIiwidGhlbiIsInJlc3BvbnNlIiwianNvbiIsImRhdGEiLCJpdGVtIiwiZmlsdGVyIiwiZWxlbSIsInNvcnRpbmdBdmFsaWFibGUiLCJzb3J0IiwicHJldiIsIm5leHQiLCJwcmljZSIsInNvcnRpbmdCeUNvc3QiLCJ4IiwidGl0bGUiLCJ0b0xvd2VyQ2FzZSIsInkiLCJzb3J0aW5nQnlOYW1lIiwic29ydGluZyIsImdvb2RJdGVtcyIsIm1hcCIsImlkIiwiaW1hZ2UiLCJkZXNjciIsImNvbmNhdCIsInJldHVybkdvb2RJdGVtIiwiam9pbiIsImFkZEdvb2RUb0NvbnRhaW5lciIsInZhbHVlIiwiZmluZCIsImFjdGl2ZVBhZ2UiLCJyZXR1cm5QYWdpbmdCdXR0b24iLCJyZXR1cm5BbnlQYWdpbmdCdXR0b25zIiwiZnJzdCIsImxhc3QiLCJwYWdpbmdCdXR0b25zIiwiYW1vdW50SXRlbSIsImFtb3VudEJ1dHRvbiIsIk1hdGgiLCJjZWlsIiwicmV0dXJuUGFnaW5nQnV0dG9ucyIsImZpcnN0SXRlbSIsImxhc3RJdGVtIiwic2xpY2UiLCJyZXR1cm5JdGVtSW5BY3RpdmVQYWdlIiwiZ29vZEluQmFza2V0IiwiYWRkQ291bnQiLCJjb3VudCIsInJlbG9hZEJhc2tldCIsImxvY2FsU3RvcmFnZSIsIkpTT04iLCJzdHJpbmdpZnkiLCJyZWR1Y2UiLCJzdW0iLCJnZXRJdGVtIiwicGFyc2UiLCJpbmRleCIsInNwbGljZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJwYWdpbmF0aW9uQnV0dG9uQ29udGFpbmVyIiwic29ydGluZ0J1dHRvbkNvbnRhaW5lciIsImF2YWxpYWJsZUNoZWNrYm94IiwiZ2V0RWxlbWVudEJ5SWQiLCJnb29kQ29udGFpbmVyIiwiYmFza2V0R29vZENvbnRhaW5lciIsImV2ZW50IiwidGFyZ2V0RWxlbWVudCIsInRhcmdldCIsImNvbnRhaW5zIiwiZ2V0QXR0cmlidXRlIiwic29ydGluZ1NldHRpbmciLCJhZGQiLCJjaGVja2VkIiwiZ29vZElkIiwicGFyZW50RWxlbWVudCJdLCJtYXBwaW5ncyI6IkFBQUEsYUFFQSxTQUFTQSxtQkFB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ZW50IjpbInZhciB7IGFkZEdvb2RUb0Jhc2tldCwgZ2V0TG9jYWxTb3JhZ2UsIHJlbW92ZUdvb2RGcm9tQmFza2V0LCBjb3VudEdvb2RJbkJhc2tldCB9ID0gYmFza2V0U2V0dGluZygpLFxyXG5cdHsgYWRkUGFnaW5nLCBzZXRBY3RpdmVQYWdlIH0gPSBwYWdpbmcoKSxcclxuXHR7IGxvYWRHb29kVG9QYWdlLCBzZXRBdmFsaWFibGUsIHNldFNvcnRpbmcsIHJldHVybkdvb2REYXRhIH0gPSBnb29kU2V0dGluZygpLFxyXG5cdHsgZmluZENvbnRhaW5lckFuZFJlbW92ZUNsYXNzIH0gPSBjb250YWluZXJDbGFzc1NldHRpbmcoKVxyXG5cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uKCkge1xyXG5cdGNvbnN0IHBhZ2luYXRpb25CdXR0b25Db250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuanMtcGFnaW5hdGlvbicpLFxyXG5cdFx0c29ydGluZ0J1dHRvbkNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5qcy1zb3J0aW5nLWJ1dHRvbnMnKSxcclxuXHRcdGF2YWxpYWJsZUNoZWNrYm94ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2F2YWxpYWJsZScpLFxyXG5cdFx0Z29vZENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5qcy1nb29kJyksXHJcblx0XHRiYXNrZXRHb29kQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmpzLWJhc2tldC1nb29kJylcclxuXHJcblx0Ly/RgdC70YPRiNCw0LvQutCwINC60L3QvtC/0L7QuiDQv9Cw0LPQuNC90LDRgtC+0YDQsFxyXG5cdHBhZ2luYXRpb25CdXR0b25Db250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBldmVudCA9PiB7XHJcblx0XHRjb25zdCB0YXJnZXRFbGVtZW50ID0gZXZlbnQudGFyZ2V0XHJcblx0XHRpZiAodGFyZ2V0RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2pzLXBhZ2luYXRpb24tYnV0dG9uJykgJiYgIXRhcmdldEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKSkge1xyXG5cdFx0XHRzZXRBY3RpdmVQYWdlKHRhcmdldEVsZW1lbnQuZ2V0QXR0cmlidXRlKCdpZCcpIC0gMSlcclxuXHRcdH1cclxuXHR9KVxyXG5cclxuXHQvLyDRgdC70YPRiNCw0LvQutCwINGB0L7RgNGC0LjRgNC+0LLQvtC6XHJcblx0c29ydGluZ0J1dHRvbkNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGV2ZW50ID0+IHtcclxuXHRcdGNvbnN0IHRhcmdldEVsZW1lbnQgPSBldmVudC50YXJnZXQsXHJcblx0XHRcdHNvcnRpbmdTZXR0aW5nID0gdGFyZ2V0RWxlbWVudC5nZXRBdHRyaWJ1dGUoJ3NvcnRpbmctc2V0dGluZycpXHJcblx0XHRpZiAodGFyZ2V0RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2pzLXNvcnRpbmcnKSAmJiAhdGFyZ2V0RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2FjdGl2ZScpKSB7XHJcblx0XHRcdGZpbmRDb250YWluZXJBbmRSZW1vdmVDbGFzcygnLmpzLXNvcnRpbmcnLCAnYWN0aXZlJylcclxuXHRcdFx0c2V0U29ydGluZyhzb3J0aW5nU2V0dGluZylcclxuXHRcdFx0dGFyZ2V0RWxlbWVudC5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKVxyXG5cdFx0fVxyXG5cdH0pXHJcblxyXG5cdC8vINGB0LvRg9GI0LDQu9C60LAg0YHQvtGA0YLQuNGA0L7QstC60Lgg0L/QviDQvdCw0LvQuNGH0LjRjlxyXG5cdGF2YWxpYWJsZUNoZWNrYm94LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGV2ZW50ID0+IHtcclxuXHRcdHNldEF2YWxpYWJsZShldmVudC50YXJnZXQuY2hlY2tlZClcclxuXHR9KVxyXG5cclxuXHQvLyDQutC90L7Qv9C60LAg0LTQvtCx0LDQstC40YLRjCDQsiDQutC+0YDQt9C40L3Rg1xyXG5cdGdvb2RDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBldmVudCA9PiB7XHJcblx0XHRpZiAoZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZ29vZF9fYnV0dG9uJykpIHtcclxuXHRcdFx0bGV0IGdvb2RJZCA9IGV2ZW50LnRhcmdldC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQuZ2V0QXR0cmlidXRlKCdnb29kLWlkJylcclxuXHRcdFx0bGV0IGdvb2REYXRhID0gcmV0dXJuR29vZERhdGEoZ29vZElkKVxyXG5cdFx0XHRhZGRHb29kVG9CYXNrZXQoZ29vZERhdGEpXHJcblx0XHR9XHJcblx0fSlcclxuXHJcblx0Ly8g0LrQvdC+0L/QutCwINGD0LTQsNC70LjRgtGMINC40Lcg0LrQvtGA0LfQuNC90YtcclxuXHRiYXNrZXRHb29kQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZXZlbnQgPT4ge1xyXG5cdFx0Y29uc3QgdGFyZ2V0RWxlbWVudCA9IGV2ZW50LnRhcmdldFxyXG5cdFx0aWYgKHRhcmdldEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdqcy1yZW1vdmUtZ29vZCcpKSB7XHJcblx0XHRcdGxldCBnb29kSWQgPSB0YXJnZXRFbGVtZW50LnBhcmVudEVsZW1lbnQuZ2V0QXR0cmlidXRlKCdiYXNrZXQtZ29vZC1pZCcpXHJcblx0XHRcdHJlbW92ZUdvb2RGcm9tQmFza2V0KGdvb2RJZClcclxuXHRcdH1cclxuXHR9KVxyXG59KVxyXG5cclxubG9hZEdvb2RUb1BhZ2UoKVxyXG5nZXRMb2NhbFNvcmFnZSgpXHJcblxyXG4vL9CU0L7QsdCw0LLQu9C10L3QuNC1INGN0LvQtdC80LXQvdGC0L7QsiDQsiDQutC+0L3RgtC10LnQvdC10YBcclxuZnVuY3Rpb24gYWRkVG9Db250YWluZXIoY29udGFpbmVyQ2xhc3MsIGVsZW1lbnQpIHtcclxuXHRjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lckNsYXNzKVxyXG5cdGlmIChjb250YWluZXIpIGNvbnRhaW5lci5pbm5lckhUTUwgPSBlbGVtZW50XHJcbn1cclxuZnVuY3Rpb24gYWRkVG9BbnlDb250YWluZXJzKGNvbnRhaW5lckNsYXNzLCBlbGVtZW50KSB7XHJcblx0Y29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChjb250YWluZXJDbGFzcylcclxuXHRpZiAoY29udGFpbmVyKSB7XHJcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IGNvbnRhaW5lci5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRjb250YWluZXJbaV0uaW5uZXJIVE1MID0gZWxlbWVudFxyXG5cdFx0fVxyXG5cdH1cclxufVxyXG5cclxuLy/Rg9C00LDQu9C40YLRjCDQutC70LDRgdGBINGDINCz0YDRg9C/0L/RiyDQutC+0L3RgtC10LnQvdC10YDQvtCyXHJcbmZ1bmN0aW9uIGNvbnRhaW5lckNsYXNzU2V0dGluZygpIHtcclxuXHR2YXIgYWxsQ29udGFpbmVyLCBjbGFzc1RvUmVtb3ZlXHJcblx0Y29uc3QgcmVtb3ZlQ2xhc3NJbkNvbnRhaW5lciA9IChpID0gMCkgPT4ge1xyXG5cdFx0aWYgKGkgPCBhbGxDb250YWluZXIubGVuZ3RoKSB7XHJcblx0XHRcdGFsbENvbnRhaW5lcltpXS5jbGFzc0xpc3QucmVtb3ZlKGNsYXNzVG9SZW1vdmUpXHJcblx0XHRcdHJldHVybiByZW1vdmVDbGFzc0luQ29udGFpbmVyKGkgKyAxKVxyXG5cdFx0fVxyXG5cdH1cclxuXHRyZXR1cm4ge1xyXG5cdFx0ZmluZENvbnRhaW5lckFuZFJlbW92ZUNsYXNzOiAoY29udGFpbmVyLCBjbGFzc05hbWUpID0+IHtcclxuXHRcdFx0YWxsQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChjb250YWluZXIpXHJcblx0XHRcdGNsYXNzVG9SZW1vdmUgPSBjbGFzc05hbWVcclxuXHRcdFx0cmVtb3ZlQ2xhc3NJbkNvbnRhaW5lcigpXHJcblx0XHR9XHJcblx0fVxyXG59XHJcblxyXG4vLyDRgtC+0LLQsNGA0YtcclxuZnVuY3Rpb24gZ29vZFNldHRpbmcoKSB7XHJcblx0dmFyIGdvb2REYXRhID0gW10sXHJcblx0XHRhdmFsaWFibGUgPSBmYWxzZSxcclxuXHRcdHNvcnRpbmdWYWx1ZSA9ICdzb3J0aW5nLW5hbWUnXHJcblxyXG5cdGNvbnN0IHNvcnRpbmdBdmFsaWFibGUgPSBkYXRhID0+IHtcclxuXHRcdHJldHVybiBkYXRhLmZpbHRlcihlbGVtID0+IGVsZW0uYXZhbGlhYmxlKVxyXG5cdH1cclxuXHJcblx0Y29uc3Qgc29ydGluZ0J5Q29zdCA9IGRhdGEgPT4ge1xyXG5cdFx0cmV0dXJuIGRhdGEuc29ydCgocHJldiwgbmV4dCkgPT4gcHJldi5wcmljZSAtIG5leHQucHJpY2UpXHJcblx0fVxyXG5cclxuXHRjb25zdCBzb3J0aW5nQnlOYW1lID0gZGF0YSA9PiB7XHJcblx0XHRyZXR1cm4gZGF0YS5zb3J0KChwcmV2LCBuZXh0KSA9PiB7XHJcblx0XHRcdGNvbnN0IHggPSBwcmV2LnRpdGxlLnRvTG93ZXJDYXNlKClcclxuXHRcdFx0Y29uc3QgeSA9IG5leHQudGl0bGUudG9Mb3dlckNhc2UoKVxyXG5cdFx0XHRpZiAoeCA8IHkpIHJldHVybiAtMVxyXG5cdFx0XHRpZiAoeCA8IHkpIHJldHVybiAxXHJcblx0XHR9KVxyXG5cdH1cclxuXHJcblx0Y29uc3Qgc29ydGluZyA9IGRhdGEgPT4ge1xyXG5cdFx0bGV0IGl0ZW0gPSBkYXRhXHJcblx0XHRpZiAoYXZhbGlhYmxlKSBpdGVtID0gc29ydGluZ0F2YWxpYWJsZShkYXRhKVxyXG5cclxuXHRcdGlmIChzb3J0aW5nVmFsdWUgPT0gJ3NvcnRpbmctY29zdCcpIGl0ZW0gPSBzb3J0aW5nQnlDb3N0KGl0ZW0pXHJcblx0XHRlbHNlIGlmIChzb3J0aW5nVmFsdWUgPT0gJ3NvcnRpbmctbmFtZScpIGl0ZW0gPSBzb3J0aW5nQnlOYW1lKGl0ZW0pXHJcblx0XHRyZXR1cm4gaXRlbVxyXG5cdH1cclxuXHJcblx0Y29uc3QgcmV0dXJuR29vZEl0ZW0gPSBkYXRhID0+IHtcclxuXHRcdGxldCB7IGlkLCBpbWFnZSwgdGl0bGUsIHByaWNlLCBkZXNjciB9ID0gZGF0YVxyXG5cdFx0cmV0dXJuIGA8ZGl2IGNsYXNzPVwiZ29vZF9faXRlbVwiIGdvb2QtaWQ9JHtpZH0+XHJcblx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwiZ29vZF9faW1hZ2VcIj48aW1nIHNyYz1cIiR7aW1hZ2V9XCIvPjwvZGl2PlxyXG5cdFx0XHRcdFx0PGRpdiBjbGFzcz1cImdvb2RfX2luZm9ybWF0aW9uXCI+XHJcblx0XHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJnb29kX190aXRsZVwiPiR7dGl0bGV9PC9kaXY+XHJcblx0XHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJnb29kX19wcmljZVwiPiR7cHJpY2V9INGA0YPQsTwvZGl2PlxyXG5cdFx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwiZ29vZF9fZGVzY3JpcHRpb25cIj4ke2Rlc2NyfTwvZGl2PlxyXG5cdFx0XHRcdFx0PC9kaXY+XHJcblx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwiZ29vZF9fdHJhbnNhY3Rpb25cIj5cclxuXHRcdFx0XHRcdFx0PGJ1dHRvbiBjbGFzcz1cImdvb2RfX2J1dHRvblwiPtCU0L7QsdCw0LLQuNGC0Ywg0LIg0LrQvtGA0LfQuNC90YM8L2J1dHRvbj5cclxuXHRcdFx0XHRcdFx0PGRpdiBjbGFzcz1cImdvb2RfX2Jhc2tldC1mZWVkYmFjayBqcy1nb29kLWluLWJhc2tldFwiPjwvZGl2PlxyXG5cdFx0XHRcdFx0PC9kaXY+XHJcblx0XHRcdFx0PC9kaXY+YFxyXG5cdH1cclxuXHJcblx0ZnVuY3Rpb24gYWRkR29vZFRvQ29udGFpbmVyKGRhdGEpIHtcclxuXHRcdGdvb2REYXRhID0gZGF0YVxyXG5cdFx0bGV0IGdvb2RJdGVtcyA9IGRhdGEubWFwKGl0ZW0gPT4gcmV0dXJuR29vZEl0ZW0oaXRlbSkpXHJcblx0XHRnb29kSXRlbXMgPSBnb29kSXRlbXMuam9pbignJylcclxuXHRcdGFkZFRvQ29udGFpbmVyKCcuanMtZ29vZCcsIGdvb2RJdGVtcylcclxuXHR9XHJcblxyXG5cdHJldHVybiB7XHJcblx0XHRsb2FkR29vZFRvUGFnZTogKCkgPT4ge1xyXG5cdFx0XHRmZXRjaCgnanMvZ29vZHMuanNvbicpXHJcblx0XHRcdFx0LnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UuanNvbigpKVxyXG5cdFx0XHRcdC50aGVuKGRhdGEgPT4gc29ydGluZyhkYXRhKSlcclxuXHRcdFx0XHQudGhlbihkYXRhID0+IGFkZFBhZ2luZyhkYXRhKSlcclxuXHRcdFx0XHQudGhlbihkYXRhID0+IHtcclxuXHRcdFx0XHRcdGFkZEdvb2RUb0NvbnRhaW5lcihkYXRhKVxyXG5cdFx0XHRcdFx0Y291bnRHb29kSW5CYXNrZXQoKVxyXG5cdFx0XHRcdH0pXHJcblx0XHR9LFxyXG5cdFx0c2V0QXZhbGlhYmxlOiB2YWx1ZSA9PiB7XHJcblx0XHRcdGF2YWxpYWJsZSA9IHZhbHVlXHJcblx0XHRcdHNldEFjdGl2ZVBhZ2UoMClcclxuXHRcdFx0bG9hZEdvb2RUb1BhZ2UoKVxyXG5cdFx0fSxcclxuXHRcdHNldFNvcnRpbmc6IHZhbHVlID0+IHtcclxuXHRcdFx0aWYgKHNvcnRpbmdWYWx1ZSAhPSB2YWx1ZSkge1xyXG5cdFx0XHRcdHNvcnRpbmdWYWx1ZSA9IHZhbHVlXHJcblx0XHRcdFx0bG9hZEdvb2RUb1BhZ2UoKVxyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cdFx0cmV0dXJuR29vZERhdGE6IGlkID0+IHtcclxuXHRcdFx0cmV0dXJuIGdvb2REYXRhLmZpbmQoaXRlbSA9PiBpdGVtLmlkID09IGlkKVxyXG5cdFx0fVxyXG5cdH1cclxufVxyXG5cclxuLy/Qv9Cw0LPQuNC90LDRhtC40Y9cclxuZnVuY3Rpb24gcGFnaW5nKCkge1xyXG5cdGNvbnN0IGl0ZW1JblBhZ2UgPSAxNSAvLyDQutC+0LvQuNGH0LXRgdGC0LLQviDRjdC70LXQvNC10L3RgtC+0LIg0L3QsCDRgdGC0YDQsNC90LjRhtC1XHJcblx0dmFyIGFjdGl2ZVBhZ2UgPSAwIC8vINCw0LrRgtC40LLQvdCw0Y8g0YHRgtGA0LDQvdC40YbQsFxyXG5cclxuXHRjb25zdCByZXR1cm5QYWdpbmdCdXR0b24gPSBpID0+IHtcclxuXHRcdHJldHVybiBgPGJ1dHRvbiBcclxuXHRcdFx0Y2xhc3M9XCJwYWdpbmF0aW9uX19pdGVtIGpzLXBhZ2luYXRpb24tYnV0dG9uICR7aSA9PSBhY3RpdmVQYWdlID8gJ2FjdGl2ZScgOiAnJ31cIiBcclxuXHRcdFx0aWQ9XCIke2kgKyAxfVwiPlxyXG5cdFx0XHRcdCR7aSArIDF9XHJcblx0XHRcdDwvYnV0dG9uPmBcclxuXHR9XHJcblxyXG5cdGNvbnN0IHJldHVyblBhZ2luZ0RvdHMgPSAoKSA9PiB7XHJcblx0XHRyZXR1cm4gYDxzcGFuIGNsYXNzPSdwYWdpbmF0aW9uX19kb3RzJz4uLi48L3NwYW4+YFxyXG5cdH1cclxuXHJcblx0Y29uc3QgcmV0dXJuQW55UGFnaW5nQnV0dG9ucyA9IChmcnN0LCBsYXN0KSA9PiB7XHJcblx0XHRsZXQgcGFnaW5nQnV0dG9ucyA9ICcnXHJcblx0XHRmb3IgKGxldCBpID0gZnJzdDsgaSA8IGxhc3Q7IGkrKykge1xyXG5cdFx0XHRwYWdpbmdCdXR0b25zICs9IHJldHVyblBhZ2luZ0J1dHRvbihpKVxyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIHBhZ2luZ0J1dHRvbnNcclxuXHR9XHJcblxyXG5cdGNvbnN0IHJldHVyblBhZ2luZ0J1dHRvbnMgPSBkYXRhID0+IHtcclxuXHRcdHZhciBpdGVtID0gZGF0YSwgLy8g0LzQsNGB0YHQuNCyINGC0L7QstCw0YDQvtCyXHJcblx0XHRcdGFtb3VudEl0ZW0gPSBpdGVtLmxlbmd0aCwgLy8g0LrQvtC70LjRh9C10YHRgtCy0L4g0YLQvtCy0LDRgNC+0LIg0LLRgdC10LPQvlxyXG5cdFx0XHRhbW91bnRCdXR0b24gPSBNYXRoLmNlaWwoYW1vdW50SXRlbSAvIGl0ZW1JblBhZ2UpLCAvLyDQutC+0LvQuNGH0LXRgdGC0LLQviDRgdGC0YDQsNC90LjRhlxyXG5cdFx0XHRwYWdpbmdCdXR0b25zID0gJycgLy8g0YDQsNC30LzQtdGC0LrQsCDQutC90L7Qv9C+0Log0L/QsNCz0LjQvdCw0YbQuNC4XHJcblxyXG5cdFx0aWYgKGFtb3VudEJ1dHRvbiA+IDYpIHtcclxuXHRcdFx0aWYgKGFjdGl2ZVBhZ2UgPCAyIHx8IGFjdGl2ZVBhZ2UgPiBhbW91bnRCdXR0b24gLSAzKSB7XHJcblx0XHRcdFx0cGFnaW5nQnV0dG9ucyArPSByZXR1cm5BbnlQYWdpbmdCdXR0b25zKDAsIDMpXHJcblx0XHRcdFx0cGFnaW5nQnV0dG9ucyArPSByZXR1cm5QYWdpbmdEb3RzKClcclxuXHRcdFx0XHRwYWdpbmdCdXR0b25zICs9IHJldHVybkFueVBhZ2luZ0J1dHRvbnMoYW1vdW50QnV0dG9uIC0gMywgYW1vdW50QnV0dG9uKVxyXG5cdFx0XHR9IGVsc2UgaWYgKGFjdGl2ZVBhZ2UgPT0gMikge1xyXG5cdFx0XHRcdHBhZ2luZ0J1dHRvbnMgKz0gcmV0dXJuQW55UGFnaW5nQnV0dG9ucygwLCA0KVxyXG5cdFx0XHRcdHBhZ2luZ0J1dHRvbnMgKz0gcmV0dXJuUGFnaW5nRG90cygpXHJcblx0XHRcdFx0cGFnaW5nQnV0dG9ucyArPSByZXR1cm5BbnlQYWdpbmdCdXR0b25zKGFtb3VudEJ1dHRvbiAtIDEsIGFtb3VudEJ1dHRvbilcclxuXHRcdFx0fSBlbHNlIGlmIChhY3RpdmVQYWdlID09IGFtb3VudEJ1dHRvbiAtIDMpIHtcclxuXHRcdFx0XHRwYWdpbmdCdXR0b25zICs9IHJldHVybkFueVBhZ2luZ0J1dHRvbnMoMCwgMSlcclxuXHRcdFx0XHRwYWdpbmdCdXR0b25zICs9IHJldHVyblBhZ2luZ0RvdHMoKVxyXG5cdFx0XHRcdHBhZ2luZ0J1dHRvbnMgKz0gcmV0dXJuQW55UGFnaW5nQnV0dG9ucyhhbW91bnRCdXR0b24gLSA0LCBhbW91bnRCdXR0b24pXHJcblx0XHRcdH0gZWxzZSBpZiAoYWN0aXZlUGFnZSA+IDIgJiYgYWN0aXZlUGFnZSA8IGFtb3VudEJ1dHRvbiAtIDMpIHtcclxuXHRcdFx0XHRwYWdpbmdCdXR0b25zICs9IHJldHVybkFueVBhZ2luZ0J1dHRvbnMoMCwgMSlcclxuXHRcdFx0XHRwYWdpbmdCdXR0b25zICs9IHJldHVyblBhZ2luZ0RvdHMoKVxyXG5cdFx0XHRcdHBhZ2luZ0J1dHRvbnMgKz0gcmV0dXJuQW55UGFnaW5nQnV0dG9ucyhhY3RpdmVQYWdlIC0gMSwgYWN0aXZlUGFnZSArIDIpXHJcblx0XHRcdFx0cGFnaW5nQnV0dG9ucyArPSByZXR1cm5QYWdpbmdEb3RzKClcclxuXHRcdFx0XHRwYWdpbmdCdXR0b25zICs9IHJldHVybkFueVBhZ2luZ0J1dHRvbnMoYW1vdW50QnV0dG9uIC0gMSwgYW1vdW50QnV0dG9uKVxyXG5cdFx0XHR9XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRwYWdpbmdCdXR0b25zICs9IHJldHVybkFueVBhZ2luZ0J1dHRvbnMoMCwgYW1vdW50QnV0dG9uKVxyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIHBhZ2luZ0J1dHRvbnNcclxuXHR9XHJcblxyXG5cdGNvbnN0IHJldHVybkl0ZW1JbkFjdGl2ZVBhZ2UgPSBkYXRhID0+IHtcclxuXHRcdGNvbnN0IGZpcnN0SXRlbSA9IGFjdGl2ZVBhZ2UgKiBpdGVtSW5QYWdlLFxyXG5cdFx0XHRsYXN0SXRlbSA9IGZpcnN0SXRlbSArIGl0ZW1JblBhZ2VcclxuXHRcdHJldHVybiBkYXRhLnNsaWNlKGZpcnN0SXRlbSwgbGFzdEl0ZW0pXHJcblx0fVxyXG5cclxuXHRyZXR1cm4ge1xyXG5cdFx0c2V0QWN0aXZlUGFnZTogaSA9PiB7XHJcblx0XHRcdGFjdGl2ZVBhZ2UgPSBpXHJcblx0XHRcdGxvYWRHb29kVG9QYWdlKClcclxuXHRcdH0sXHJcblx0XHRhZGRQYWdpbmc6IGRhdGEgPT4ge1xyXG5cdFx0XHRhZGRUb0NvbnRhaW5lcignLmpzLXBhZ2luYXRpb24nLCByZXR1cm5QYWdpbmdCdXR0b25zKGRhdGEpKVxyXG5cdFx0XHRyZXR1cm4gcmV0dXJuSXRlbUluQWN0aXZlUGFnZShkYXRhKVxyXG5cdFx0fVxyXG5cdH1cclxufVxyXG5cclxuLy/QutC+0YDQt9C40L3QsFxyXG5mdW5jdGlvbiBiYXNrZXRTZXR0aW5nKCkge1xyXG5cdHZhciBnb29kSW5CYXNrZXQgPSBbXVxyXG5cclxuXHRjb25zdCBhZGRDb3VudCA9IGRhdGEgPT4ge1xyXG5cdFx0ZGF0YS5jb3VudCA9IDFcclxuXHRcdHJldHVybiBkYXRhXHJcblx0fVxyXG5cclxuXHRjb25zdCByZXR1cm5CYXNrZXRHb29kSXRlbSA9IGRhdGEgPT4ge1xyXG5cdFx0bGV0IHsgaWQsIGltYWdlLCB0aXRsZSwgY291bnQgfSA9IGRhdGFcclxuXHRcdHJldHVybiBgPGRpdiBjbGFzcz1cImJhc2tldF9fZ29vZC1pdGVtXCIgYmFza2V0LWdvb2QtaWQ9XCIke2lkfVwiPlxyXG5cdFx0XHQ8YnV0dG9uIGNsYXNzPVwiYmFza2V0X19nb29kLXJlbW92ZSBqcy1yZW1vdmUtZ29vZFwiPiYjMTI4OTM4OzwvYnV0dG9uPlxyXG5cdFx0XHQ8ZGl2IGNsYXNzPVwiYmFza2V0X19nb29kLWltYWdlXCI+PGltZyBzcmM9XCIke2ltYWdlfVwiIC8+PC9kaXY+XHJcblx0XHRcdDxkaXYgY2xhc3M9XCJiYXNrZXRfX2dvb2QtbmFtZVwiPiR7dGl0bGV9PC9kaXY+XHJcblx0XHRcdDxkaXYgY2xhc3M9XCJiYXNrZXRfX2dvb2QtYW1vdXRcIj4ke2NvdW50fTwvZGl2PlxyXG5cdFx0PC9kaXY+YFxyXG5cdH1cclxuXHJcblx0Y29uc3QgYWRkR29vZFRvQ29udGFpbmVyID0gKCkgPT4ge1xyXG5cdFx0bGV0IGdvb2RBcnJheSA9IGdvb2RJbkJhc2tldC5tYXAoZWxlbWVudCA9PiByZXR1cm5CYXNrZXRHb29kSXRlbShlbGVtZW50KSlcclxuXHRcdGdvb2RBcnJheSA9IGdvb2RBcnJheS5qb2luKCcnKVxyXG5cdFx0YWRkVG9Db250YWluZXIoJy5qcy1iYXNrZXQtZ29vZCcsIGdvb2RBcnJheSlcclxuXHR9XHJcblxyXG5cdGNvbnN0IGZpbmRHb29kQW5kUmVtb3ZlID0gaWQgPT4ge1xyXG5cdFx0bGV0IGluZGV4XHJcblx0XHRnb29kSW5CYXNrZXQuZmluZCgoaXRlbSwgaSkgPT4ge1xyXG5cdFx0XHRpZiAoaWQgPT0gaXRlbS5pZCkge1xyXG5cdFx0XHRcdGluZGV4ID0gaVxyXG5cdFx0XHR9XHJcblx0XHR9KVxyXG5cdFx0Z29vZEluQmFza2V0LnNwbGljZShpbmRleCwgMSlcclxuXHR9XHJcblxyXG5cdGNvbnN0IGNvdW50VG90YWwgPSAoKSA9PiB7XHJcblx0XHRsZXQgdG90YWxDb3N0ID0gZ29vZEluQmFza2V0LnJlZHVjZShmdW5jdGlvbihzdW0sIGl0ZW0pIHtcclxuXHRcdFx0cmV0dXJuIHN1bSArIGl0ZW0uY291bnQgKiBpdGVtLnByaWNlXHJcblx0XHR9LCAwKVxyXG5cdFx0YWRkVG9Db250YWluZXIoJy5qcy1jb3VudC1yZXN1bHQnLCB0b3RhbENvc3QpXHJcblx0fVxyXG5cclxuXHRjb25zdCBzYXZlVG9Mb2NhbFN0b3JhZ2UgPSAoKSA9PiB7XHJcblx0XHRsb2NhbFN0b3JhZ2UuZ29vZEluQmFza2V0ID0gSlNPTi5zdHJpbmdpZnkoZ29vZEluQmFza2V0KVxyXG5cdH1cclxuXHJcblx0Y29uc3QgcmVsb2FkQmFza2V0ID0gKCkgPT4ge1xyXG5cdFx0c2F2ZVRvTG9jYWxTdG9yYWdlKClcclxuXHRcdGFkZEdvb2RUb0NvbnRhaW5lcigpXHJcblx0XHRjb3VudFRvdGFsKClcclxuXHRcdGNvdW50R29vZEluQmFza2V0KClcclxuXHR9XHJcblxyXG5cdHJldHVybiB7XHJcblx0XHRnZXRMb2NhbFNvcmFnZTogKCkgPT4ge1xyXG5cdFx0XHRpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2dvb2RJbkJhc2tldCcpICE9IG51bGwpXHJcblx0XHRcdFx0Z29vZEluQmFza2V0ID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZ29vZEluQmFza2V0JykpXHJcblx0XHRcdHJlbG9hZEJhc2tldCgpXHJcblx0XHR9LFxyXG5cdFx0Y291bnRHb29kSW5CYXNrZXQ6ICgpID0+IHtcclxuXHRcdFx0bGV0IGFtb3VudEl0ZW0gPSBnb29kSW5CYXNrZXQucmVkdWNlKGZ1bmN0aW9uKHN1bSwgaXRlbSkge1xyXG5cdFx0XHRcdHJldHVybiBzdW0gKyBpdGVtLmNvdW50XHJcblx0XHRcdH0sIDApXHJcblx0XHRcdGFkZFRvQW55Q29udGFpbmVycygnLmpzLWdvb2QtaW4tYmFza2V0JywgYNCi0L7QstCw0YDQvtCyINCyINC60L7RgNC30LjQvdC1ICAke2Ftb3VudEl0ZW19YClcclxuXHRcdH0sXHJcblx0XHRhZGRHb29kVG9CYXNrZXQ6IGRhdGEgPT4ge1xyXG5cdFx0XHRmb3IgKGxldCBpID0gMDsgaSA8IGdvb2RJbkJhc2tldC5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRcdGlmIChkYXRhLmlkID09IGdvb2RJbkJhc2tldFtpXS5pZCkge1xyXG5cdFx0XHRcdFx0Z29vZEluQmFza2V0W2ldLmNvdW50KytcclxuXHRcdFx0XHRcdHJlbG9hZEJhc2tldCgpXHJcblx0XHRcdFx0XHRyZXR1cm5cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0Z29vZEluQmFza2V0ID0gWy4uLmdvb2RJbkJhc2tldCwgYWRkQ291bnQoZGF0YSldXHJcblx0XHRcdHJlbG9hZEJhc2tldCgpXHJcblx0XHR9LFxyXG5cdFx0cmVtb3ZlR29vZEZyb21CYXNrZXQ6IGRhdGEgPT4ge1xyXG5cdFx0XHRmaW5kR29vZEFuZFJlbW92ZShkYXRhKVxyXG5cdFx0XHRyZWxvYWRCYXNrZXQoKVxyXG5cdFx0fVxyXG5cdH1cclxufVxyXG4iXX0=
